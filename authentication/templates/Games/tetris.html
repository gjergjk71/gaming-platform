	<!DOCTYPE html>
	<html>
	<body>
	<canvas id="myCanvas" width="500" height="500"
	style="border:1px solid #000000;">
	</canvas>
	<script>
	var canvas = document.getElementById("myCanvas");
	var ctx = canvas.getContext("2d");
	clon = [ 	[[200,0,50,50],[250,0,50,50],[200,50,50,50],[250,50,50,50]] ]
	katror=[[],[],[],[]]
	keys=['a','s','d']
	var score=0
	var sta=0
	var grid = [[],[]]

function lose(){
	for (i = 0; i < grid[0].length; i++) { 
		if(grid[0][i][1]==0 || grid[0][i][1]==10){
			sta+=1
			break
		}
	}

}
function random(){
		var ran =Math.floor(Math.random() * clon.length);
			for (i = 0; i < 4; i++) { 
				for (j=0; j<4 ; j++){
				katror[i].push(clon[ran][i][j])}}
				lose()}
random()
	v_of_key=[[-100,0],[0,1],[100,0]]
	window.addEventListener("keydown", (event) => {
		for (i = 0; i < keys.length; i++) { 
			if(event.key==keys[i]){ 
				for (j = 0; j < 4; j++){
			    katror[j][0]+=v_of_key[i][0]
		    	katror[j][1]+=v_of_key[i][1]}}}})
	function checks(){
		var ypos=10;
		var cout=0
		for (l=0;l<5;l++){
			var xpos=0 
		 	var pos=[];

		
		for (i=0;i<5;i++){
			for (j=0;j<grid[0].length;j++){
				if(xpos==grid[0][j][0] && ypos==grid[0][j][1]){
					pos.push(j)
					break}}
			xpos+=100
			if(pos.length==5){
				cout+=1
				score+=100
				for (j=0;j<pos.length;j++){
					for (k=0;k<4;k++){
						grid[0][pos[j]+k]='non'
						grid[1][pos[j]+k]='non'}
			}pos=[]
			for (j=0;j<grid[0].length;j++){
				try{grid[0][j][1]+=100
				} catch {
					console.log("Something happened");
				}
			}
		}
		}ypos+=100}}
	function gameLoop(){
		ctx.clearRect(0,0,canvas.width,canvas.height);
		ctx.fillStyle = "#FF0000";
		var cout= 0
		for (i=0;i<katror.length;i++){
			for (j=0;j<grid[0].length;j++){
				if(katror[i][0]==grid[0][j][0] && katror[i][1]+100==grid[0][j][1]){
					cout+=1}

				}
			if(katror[i][1]+100>canvas.height){
				cout+=1
				}
			if(cout>0){
				for (j=0;j<katror.length;j++){
					grid[0].push([katror[j][0],katror[j][1]])
					grid[1].push([katror[j][2],katror[j][3]])
				}	
				for (j=0;j<katror.length;j++){
					 katror[j] = []
				}random()
				checks()
				break}
		for (i = 0; i <katror.length; i++){
			katror[i][1]+=10
	  }}

			for (i= 0; i < grid[0].length; i++){
				ctx.fillRect(grid[0][i][0],grid[0][i][1],grid[1][i][0],grid[1][i][1]);
			}
			for (j= 0; j < 4; j++){
				ctx.fillRect(katror[j][0],katror[j][1],katror[j][2],katror[j][3]);
			}


		ctx.stroke();
		if(grid[0].length<5){
			console.log(grid[0])
		}
		if(sta==0){window.requestAnimationFrame(gameLoop);}else{ctx.clearRect(0,0,canvas.width,canvas.height); console.log('hello')}
	}
	window.requestAnimationFrame(gameLoop);

	</script>
	</script>
	</body>
	</html>

